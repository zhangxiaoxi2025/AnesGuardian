# ===================================
# AnesGuardian 环境配置模板
# ===================================
# 使用说明：复制此文件为 .env 并填入实际的配置值

# ===================================
# 必需配置（Required）
# ===================================

# Google Gemini AI API 密钥 - 用于医疗分析和AI功能
# 获取地址: https://aistudio.google.com/app/apikey
GEMINI_API_KEY=your_gemini_api_key_here

# PostgreSQL 数据库连接字符串
# 格式: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://your_username:your_password@localhost:5432/anesthesia_guardian

# ===================================
# 基础配置（Basic Settings）
# ===================================

# 应用运行环境：development 或 production
NODE_ENV=development

# 服务器端口号（默认：5000）
PORT=3001

# 日志级别：error, warn, info, debug
LOG_LEVEL=info

# ===================================
# 可选配置（Optional）
# ===================================

# 会话密钥（生产环境必需，开发环境可选）
# 生产环境请使用强随机字符串（建议至少32个字符）
# 生成方法: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
SESSION_SECRET=your-strong-random-secret-key-here

# ===================================
# 安全配置（Security Settings）
# ===================================

# CORS 允许的源地址列表（多个用逗号分隔）
# 开发环境示例: http://localhost:5173,http://localhost:5000
# 生产环境示例: https://your-domain.com,https://www.your-domain.com
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:5000,http://localhost:3000

# 告警Webhook URL（可选，用于接收系统告警）
# 支持：Slack, 钉钉, 企业微信等
# ALERT_WEBHOOK_URL=https://your-webhook-url

# ===================================
# 备用AI服务（Optional AI Services）
# ===================================

# OpenAI API 密钥（备用AI服务，可选）
# OPENAI_API_KEY=your_openai_api_key_here

# Anthropic Claude API 密钥（备用AI服务，可选）
# ANTHROPIC_API_KEY=your_anthropic_api_key_here

# ===================================
# 数据库配置说明
# ===================================
# 
# 选项1：本地 PostgreSQL
#   1. 安装: brew install postgresql (macOS)
#   2. 启动: brew services start postgresql
#   3. 创建数据库: createdb anesthesia_guardian
#   4. 配置: postgresql://postgres:password@localhost:5432/anesthesia_guardian
#
# 选项2：Neon Database（推荐，免费云数据库）
#   1. 访问 https://neon.tech
#   2. 注册并创建新项目
#   3. 复制连接字符串到 DATABASE_URL
#   例如: postgresql://username:password@ep-xyz.region.neon.tech/anesthesia_guardian?sslmode=require
#
# 选项3：其他云数据库 (Supabase, Railway, etc.)
#   请确保连接字符串格式正确并包含 SSL 参数（如需要）

# ===================================
# Supabase 配置（用于用户认证）
# ===================================
#
# ⚠️ 安全说明：
# - VITE_ 前缀的变量会被打包到前端代码中，可被用户查看
# - 非 VITE_ 前缀的变量仅在服务端可用，不会暴露给客户端
#
# 前端和后端需要不同的配置：
# - 前端：使用 VITE_SUPABASE_URL + VITE_SUPABASE_ANON_KEY（公开密钥，权限受限）
# - 后端：使用 SUPABASE_URL + SUPABASE_SERVICE_ROLE_KEY（私密密钥，完整权限）

# ===================================
# 服务端 Supabase 配置（⚠️ 私密，切勿暴露）
# ===================================

# Supabase 项目 URL（服务端专用）
# 获取方式：登录 https://supabase.com -> 选择项目 -> Settings -> API -> Project URL
SUPABASE_URL=your_supabase_project_url

# Supabase Service Role Key（服务端专用，具有完整数据库权限）
# 获取方式：登录 https://supabase.com -> 选择项目 -> Settings -> API -> Project API keys -> service_role
# ⚠️ 警告：此密钥拥有绕过所有RLS规则的权限��切勿泄露或提交到版本控制
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# ===================================
# 前端 Supabase 配置（公开，权限受限）
# ===================================

# Supabase 项目 URL（前端可见）
# 获取方式：登录 https://supabase.com -> 选择项目 -> Settings -> API -> Project URL
VITE_SUPABASE_URL=your_supabase_project_url

# Supabase 匿名密钥（前端可见，权限受RLS规则限制）
# 获取方式：登录 https://supabase.com -> 选择项目 -> Settings -> API -> Project API keys -> anon public
# 说明：此密钥可以安全地暴露在前端代码中，因为权限受到Row Level Security (RLS) 规则的严格限制
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
